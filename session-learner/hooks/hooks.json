[
  {
    "event": "Stop",
    "matcher": "*",
    "hooks": [
      {
        "type": "prompt",
        "prompt": "세션이 종료되려고 합니다. 다음 단계를 수행하세요:\n\n1. **설정 파일 확인**\n   `.claude/session-learner.local.md` 파일이 존재하는지 확인하세요.\n   파일이 없으면 아무 작업 없이 조용히 종료하세요.\n\n2. **학습 내용 평가**\n   이 세션에서 저장할 만한 유의미한 학습 내용이 있는지 판단하세요.\n   다음 경우는 저장하지 않습니다:\n   - 단순한 파일 읽기만 수행한 경우\n   - 간단한 질문-응답만 있었던 경우\n   - 실제 코드 작성이나 문제 해결이 없었던 경우\n   - 설정이나 환경 확인만 한 경우\n\n   저장할 내용이 없으면 조용히 종료하세요.\n\n3. **저장 실행**\n   유의미한 학습 내용이 있다면:\n   - 설정 파일에서 `repository_path` 읽기\n   - `session-extractor` 에이전트로 학습 내용 추출\n   - `{repository_path}/data/{YYYY-MM-DD}/{uuid}.md` 파일 생성\n   - git add, commit, push 실행\n\n4. **결과 보고**\n   저장했다면 간단히 보고: \"세션 학습 기록이 저장되었습니다: {파일 경로}\"\n   실패했다면 에러 내용 출력\n\n중요: 이 작업은 조용히 수행하고, 에러가 발생해도 사용자 경험을 방해하지 마세요."
      }
    ]
  }
]
